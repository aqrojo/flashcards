import{p as C,a as h,b as v,h as m}from"./signals.module.72b1787c.js";/* empty css                            */import{l as p,g as _}from"./preact.module.27ad78f3.js";const N=()=>{const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).collection},b=async()=>{const e=N();return await(await fetch(`./collection/${e}.json`)).json()};function I(e){const n=h(0),t=h(H(e)),o=h(!1),a=()=>{n.value=n.value+1<t.value.length?n.value+1:0,c()},i=()=>{n.value=n.value>0?n.value-1:t.value.length-1,c()},l=()=>{o.value=!0},c=()=>{o.value=!1},s=()=>{u.value||(o.value?a():l())},d=()=>{u.value||(o.value?c():i())},L=()=>{t.value=V(w.value,t.value),c(),n.value===t.value.length&&(n.value-=1)},y=x=>{n.value=x,c()},u=C(()=>t.value.length===0),w=C(()=>u.value?-1:t.value[n.value]);return{currentItem:n,index:w,indexes:t,isCardFinished:o,isCompleted:u,bury:L,handlePrev:d,handleNext:s,changeIndex:y}}function H(e){let n=[],t=0;for(;t<e;)n.push(t),t++;return n}function V(e,n){return e===void 0?n:n.filter(t=>t!==e)}var k=0;function r(e,n,t,o,a,i){var l,c,s={};for(c in n)c=="ref"?l=n[c]:s[c]=n[c];var d={type:e,props:s,key:t,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--k,__i:-1,__u:0,__source:a,__self:i};if(typeof e=="function"&&(l=e.defaultProps))for(c in l)s[c]===void 0&&(s[c]=l[c]);return p.vnode&&p.vnode(d),d}function g({children:e,className:n=""}){return r("div",{className:`fc-flash-card-content ${n}`,dangerouslySetInnerHTML:{__html:e}})}function $({front:e="",back:n="",isCardFinished:t}){return r("div",{className:`fc-flash-card-content  ${t?"fc-show":""}`,children:[r(g,{className:"fc-front-content",children:e}),r("div",{className:"fc-hidden-content",children:[r("hr",{}),r(g,{className:"fc-back-content",children:n})]})]})}function F({totalCards:e,learnedAmount:n}){return r("div",{className:"fc-collection-counter",children:r("span",{children:`${e} / ${n}`})})}function M({totalCards:e,learnedAmount:n,currentCard:t=0}){const o=n/e*100,a=t/(e-1)*100;return r("svg",{className:"fc-collection-progress",width:"100%",height:4,children:[r("rect",{className:"fc-base",x:0,y:0,height:4,width:"100%"}),r("rect",{className:"fc-bar",x:0,y:0,height:4,width:`${o}%`}),r("text",{x:`${a}%`,y:22,children:t+1})]})}function A({size:e,className:n}){return r("svg",{width:e,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})})}function P({totalCards:e,learnedAmount:n,currentCard:t}){return r("header",{className:"fc-flash-card-header",children:[r("a",{className:"fc-close-button",href:"./collections-page",children:r(A,{size:24})}),r(F,{totalCards:e,learnedAmount:n}),r(M,{totalCards:e,learnedAmount:n,currentCard:t})]})}function f({className:e,onClick:n,children:t}){return r("button",{className:`fc-circular-button ${e}`,onClick:n,children:t})}function B({size:e,className:n}){return r("svg",{width:e,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r("path",{d:"M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z"})})}function S({size:e,className:n}){return r("svg",{width:e,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r("path",{d:"M5,9V21H1V9H5M9,21A2,2 0 0,1 7,19V9C7,8.45 7.22,7.95 7.59,7.59L14.17,1L15.23,2.06C15.5,2.33 15.67,2.7 15.67,3.11L15.64,3.43L14.69,8H21C22.11,8 23,8.9 23,10V12C23,12.26 22.95,12.5 22.86,12.73L19.84,19.78C19.54,20.5 18.83,21 18,21H9M9,19H18.03L21,12V10H12.21L13.34,4.68L9,9.03V19Z"})})}function E({size:e,className:n}){return r("svg",{width:e,height:e,className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r("path",{d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"})})}function Z({isCardFinished:e,handleNext:n,bury:t}){return r("footer",{className:"fc-flash-card-controls",children:e?r(_,{children:[r(f,{onClick:n,children:r(B,{size:24})}),r(f,{onClick:t,children:r(S,{size:24})})]}):r(f,{onClick:n,children:r(E,{size:24})})})}function j({state:e,data:n,collectionId:t}){const o=e.isCompleted.value?void 0:n.cardList[e.index.value],a=n.cardList.length,i=l=>{l.key==="ArrowRight"&&e.handleNext(),l.key==="ArrowLeft"&&e.handlePrev(),l.key==="ArrowDown"&&e.bury()};return v(()=>(window.addEventListener("keydown",i,!1),()=>window.removeEventListener("keydown",i)),[]),v(()=>{e.isCompleted.value&&(window.location.href=`./collection-finished?collection=${t}`)},[e.isCompleted.value]),e.isCompleted.value?r("span",{children:"se acabÃ³!"}):r("div",{className:"fc-flash-cards-layout",children:[r(P,{totalCards:a,learnedAmount:a-e.indexes.value.length,currentCard:e.currentItem.value}),r($,{front:o?.front,back:o?.back,isCardFinished:e.isCardFinished.value}),r(Z,{isCardFinished:e.isCardFinished.value,handleNext:e.handleNext,bury:e.bury})]})}function U(){const[e,n]=m(void 0),[t,o]=m(""),a=async()=>{const i=await b();n(i.data),o(i.id)};return v(()=>{a()},[]),e?r("div",{className:"fc-play-cards-container",children:r(j,{state:I(e.cardList.length),data:e,collectionId:t})}):r("span",{children:"loading ..."})}export{U as default};
